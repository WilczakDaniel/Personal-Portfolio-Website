const e={easy:4,med:3.5,hard:2.8},t={easy:4,med:3.5,hard:2.8},s=[["#a2d149","#aad751","#69C65C","#E3D356","#879762","#9FCC46","#5A8800"],["#DB3236","#992326","#e67072","#DE978D","#9C6D71","#FFA394","#FF5F74"],["#F4840D","#ab5c09","#f7a956","#906442","#FFF6EC","#FF9255","#FFBFBD"],["#F4C20D","#ab8809","#f6ce3d","#AFBA00","#FFF8E6","#FFBB82","#D5A700"],["#008342","#005c2e","#4da87b","#2A9855","#8FF8AD","#007E3D","#18C468"],["#4885ED","#325da6","#7faaf2","#00CBEB","#00ACFF","#003A94","#CAF4FF"],["#4BDDE7","#359ba2","#81e7ee","#6DF1BF","#4DA3EC","#4FE0EA","#00B0BA"],["#B349EC","#7d33a5","#ca80f2","#FF34BA","#FFC5FF","#962BCF","#9529CE"],["#D852A6","#973974","#e486c1","#FF628D","#FFA7FA","#98006D","#B73189"]],l={1:"#1976d2",2:"#388e3c",3:"#d32f2f",4:"#7b1fa2",5:"#ff8f00",6:"#0097a7",7:"#424242"},i={top:"inset 0 4px 1px -2px var(--border-initial)",right:"inset -4px 0 1px -2px var(--border-initial)",bottom:"inset 0 -4px 1px -2px var(--border-initial)",left:"inset 4px 0 1px -2px var(--border-initial)"},a={top:"inset 0 4px 1px -2px var(--border-changed)",right:"inset -4px 0 1px -2px var(--border-changed)",bottom:"inset 0 -4px 1px -2px var(--border-changed)",left:"inset 4px 0 1px -2px var(--border-changed)"};var r=new class{difficulty={easy:[10,8,10],med:[18,14,40],hard:[24,20,99]};phoneDifficulty={easy:[6,11,10],med:[11,18,35],hard:[15,25,75]};#e=[];#t;#s=0;#l;#i="med";#a;#r=[];#n=[];#o=[];#c={easy:0,med:0,hard:0};#h;#d;#u;#m;getHighscore(){return this.#c[this.#i]}setAllCells(e){this.#m=e}getSettings(){return(this.deviceIsPhone()?this.phoneDifficulty:this.difficulty)[this.#i]}setClientWidth(e){this.#h=e}deviceIsPhone(){return this.#h<640}getScoreFromLocalStorage(){const e=localStorage.getItem("highscores");e&&(this.#c=JSON.parse(e))}startTouchTimer(){this.#d=new Date}setTimeoutID(e){this.#u=e}resetTimeoutID(){clearTimeout(this.#u),this.#u=void 0}endTouchTimer(){return new Date-this.#d}#g(){localStorage.setItem("highscores",JSON.stringify(this.#c))}checkForHighScore(e){return 0===this.#c[this.#i]||e<this.#c[this.#i]}saveHighScore(e){this.#c[this.#i]=e,this.#g()}getAllCellsWithBombs(){for(let e in this.#t)this.#t[e]>50&&this.#o.push(e);return this.#o}flagCordsAreQueued(e){return this.#e.includes(e)}addFlagCordsToQueue(e){this.#e.push(e)}deleteCordsFromQueue(e){const t=this.#e.indexOf(e);this.#e.splice(t,1)}getAllCellsWithNumbers(){const e=[];for(let t in this.#t)this.#t[t]>=0&&this.#t[t]<=9&&e.push(t),this.#t[t]>50&&this.#o.push(t);return e}cordsHaveFlag(e){return this.#n.includes(e)}getElementsWithFlags(){return this.#n.map((e=>{if(this.cordsHaveFlag(e))return this.#m[e]}))}getFlagsCounter(){return this.#l}deleteFlagCords(e){const t=this.#n.indexOf(e);t>-1&&this.#n.splice(t,1)}addFlagCords(e){this.#n.push(e)}setFlagCounter(e){return this.#l=this.difficulty[e][2],this.#l}isGameFinished(){return this.#a-this.#r.length==0}saveOpenedCells(e){e.forEach((e=>{this.#r.includes(e)||this.#r.push(e)}))}setActualDifficulty(e){this.#i=e,this.#f(e)}#f(e){const t=this.deviceIsPhone()?this.phoneDifficulty:this.difficulty,s=t[e][0]*t[e][1]-t[e][2];this.#a=s}reset(){this.#s=0,this.#t=void 0,this.#l=void 0,this.#r.length=0,this.#n.length=0,this.#o.length=0}getActualDifficulty(){return this.#i}increaseFlagCounter(){return this.#l++,this.#l}decreaseFlagCounter(){return this.#l--,this.#l}cellIsNumber(e){return this.#t[e]<50&&this.#t[e]>0}getCellNumber(e){return this.#t[e]}movesCounterAdd(){this.#s++}getMovesCounter(){return this.#s}getAllCells(){return this.#m}setCellsNumbers(e){this.#t=e}getCellsNumbers(e){return this.#t}updateCellsNumbers(e){for(const t in this.#t)e.hasOwnProperty([t])&&(this.#t[t]=e[t])}},n={};!function e(t,s,l,i){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL);function r(){}function n(e){var l=s.exports.Promise,i=void 0!==l?l:t.Promise;return"function"==typeof i?new i(e):(e(r,r),null)}var o,c,h,d,u,m,g,f,p,b=(h=Math.floor(1e3/60),d={},u=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(o=function(e){var t=Math.random();return d[t]=requestAnimationFrame((function s(l){u===l||u+h-1<l?(u=l,delete d[t],e()):d[t]=requestAnimationFrame(s)})),t},c=function(e){d[e]&&cancelAnimationFrame(d[e])}):(o=function(e){return setTimeout(e,h)},c=function(e){return clearTimeout(e)}),{frame:o,cancel:c}),C=(f={},function(){if(m)return m;if(!l&&a){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{m=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",e),null}!function(e){function t(t,s){e.postMessage({options:t||{},callback:s})}e.init=function(t){var s=t.transferControlToOffscreen();e.postMessage({canvas:s},[s])},e.fire=function(s,l,i){if(g)return t(s,null),g;var a=Math.random().toString(36).slice(2);return g=n((function(l){function r(t){t.data.callback===a&&(delete f[a],e.removeEventListener("message",r),g=null,i(),l())}e.addEventListener("message",r),t(s,a),f[a]=r.bind(null,{data:{callback:a}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),f)f[t](),delete f[t]}}(m)}return m}),y={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(e,t,s){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:y[t],s)}function F(e){return e<0?0:Math.floor(e)}function x(e){return parseInt(e,16)}function w(e){return e.map(T)}function T(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:x(t.substring(0,2)),g:x(t.substring(2,4)),b:x(t.substring(4,6))}}function D(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function S(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function A(e,t,s,a,r){var o,c,h=t.slice(),d=e.getContext("2d"),u=n((function(t){function n(){o=c=null,d.clearRect(0,0,a.width,a.height),r(),t()}o=b.frame((function t(){!l||a.width===i.width&&a.height===i.height||(a.width=e.width=i.width,a.height=e.height=i.height),a.width||a.height||(s(e),a.width=e.width,a.height=e.height),d.clearRect(0,0,a.width,a.height),h=h.filter((function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.wobble+=t.wobbleSpeed,t.velocity*=t.decay,t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble);var s=t.tick++/t.totalTicks,l=t.x+t.random*t.tiltCos,i=t.y+t.random*t.tiltSin,a=t.wobbleX+t.random*t.tiltCos,r=t.wobbleY+t.random*t.tiltSin;return e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-s)+")",e.beginPath(),"circle"===t.shape?e.ellipse?e.ellipse(t.x,t.y,Math.abs(a-l)*t.ovalScalar,Math.abs(r-i)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,s,l,i,a,r,n,o){e.save(),e.translate(t,s),e.rotate(a),e.scale(l,i),e.arc(0,0,1,r,n,o),e.restore()}(e,t.x,t.y,Math.abs(a-l)*t.ovalScalar,Math.abs(r-i)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(i)),e.lineTo(Math.floor(a),Math.floor(r)),e.lineTo(Math.floor(l),Math.floor(t.wobbleY))),e.closePath(),e.fill(),t.tick<t.totalTicks}(d,e)})),h.length?o=b.frame(t):n()})),c=n}));return{addFettis:function(e){return h=h.concat(e),u},canvas:e,promise:u,reset:function(){o&&b.cancel(o),c&&c()}}}function N(e,s){var l,i=!e,r=!!v(s||{},"resize"),o=v(s,"disableForReducedMotion",Boolean),c=a&&!!v(s||{},"useWorker")?C():null,h=i?D:S,d=!(!e||!c)&&!!e.__confetti_initialized,u="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function m(t,s,i){for(var a,r,n,o,c,d=v(t,"particleCount",F),u=v(t,"angle",Number),m=v(t,"spread",Number),g=v(t,"startVelocity",Number),f=v(t,"decay",Number),p=v(t,"gravity",Number),b=v(t,"drift",Number),C=v(t,"colors",w),y=v(t,"ticks",Number),x=v(t,"shapes"),T=v(t,"scalar"),D=function(e){var t=v(e,"origin",Object);return t.x=v(t,"x",Number),t.y=v(t,"y",Number),t}(t),S=d,N=[],M=e.width*D.x,B=e.height*D.y;S--;)N.push((a={x:M,y:B,angle:u,spread:m,startVelocity:g,color:C[S%C.length],shape:x[(o=0,c=x.length,Math.floor(Math.random()*(c-o))+o)],ticks:y,decay:f,gravity:p,drift:b,scalar:T},r=void 0,n=void 0,r=a.angle*(Math.PI/180),n=a.spread*(Math.PI/180),{x:a.x,y:a.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*a.startVelocity+Math.random()*a.startVelocity,angle2D:-r+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*a.gravity,ovalScalar:.6,scalar:a.scalar}));return l?l.addFettis(N):(l=A(e,N,h,s,i)).promise}function g(s){var a=o||v(s,"disableForReducedMotion",Boolean),g=v(s,"zIndex",Number);if(a&&u)return n((function(e){e()}));i&&l?e=l.canvas:i&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(g),document.body.appendChild(e)),r&&!d&&h(e);var f={width:e.width,height:e.height};function p(){if(c){var t={getBoundingClientRect:function(){if(!i)return e.getBoundingClientRect()}};return h(t),void c.postMessage({resize:{width:t.width,height:t.height}})}f.width=f.height=null}function b(){l=null,r&&t.removeEventListener("resize",p),i&&e&&(document.body.removeChild(e),e=null,d=!1)}return c&&!d&&c.init(e),d=!0,c&&(e.__confetti_initialized=!0),r&&t.addEventListener("resize",p,!1),c?c.fire(s,f,b):m(s,f,b)}return g.reset=function(){c&&c.reset(),l&&l.reset()},g}function M(){return p||(p=N(null,{useWorker:!0,resize:!0})),p}s.exports=function(){return M().apply(this,arguments)},s.exports.reset=function(){M().reset()},s.exports.create=N}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),n,!1);var o=n.exports;n.exports.create;const c=function(e,t,l=s[0],i=1){let a="small"===t?2:7,r="small"===t?1.6:2,n="small"===t?150:200;if(window.innerWidth<640)return;const c=document.createElement("canvas");c.style.cssText+="position: absolute; z-index: 5000; pointer-events: none;",e.appendChild(c);o.create(c,{resize:!0,useWorker:!0})({particleCount:a,spread:30,startVelocity:10,colors:l,shapes:["square"],scalar:r,zIndex:1e5,ticks:n,gravity:i})},h=function(e){return l[e]},d=function(e,t,s=!1){return e=+e,t=+t,s?[e-1+"x"+t,e+"x"+(t-1),e+"x"+(t+1),e+1+"x"+t]:[e-1+"x"+(t-1),e-1+"x"+t,e-1+"x"+(t+1),e+"x"+(t-1),e+"x"+t,e+"x"+(t+1),e+1+"x"+(t-1),e+1+"x"+t,e+1+"x"+(t+1)]},u=async function(e){try{await new Promise((t=>setTimeout(t,e)))}catch(e){throw e}};var m=new class{#p=document.querySelector(".game").style;#b=document.querySelector(".game");#C=document.querySelector(".header").style;#y=document.querySelector("body").style;#v=document.querySelector(".container").style;#m={};#t;createBoard(s,l,i,a){this.#F(),this.#b.innerHTML="";let r=e[a],n=t[a];window.innerWidth<640?(r=n=Number(this.#x(s,l)),this.#v.cssText+="position: fixed; top: 0; left: 0; transform: translate(0,0); height: 100vh;",this.#p.cssText+=`position: absolute; left: 50%; top: ${this.#w(l,r)}rem; transform: translateX(-50%)`,this.#C.width="100%"):this.#C.maxWidth=r*s+"rem",this.#t={},this.#p.cssText+=`grid-template-columns: repeat( ${s} , 1fr); grid-template-rows: repeat( ${l} , 1fr); width: ${r*s}rem; height: ${n*l}rem`;const o=this.#T(l,s,r);return this.#D(o),this.#S(s),this.#m}#F(){for(const e in this.#m)delete this.#m[e]}setBackground(e){this.#y.backgroundColor=e<640?"#578a34":"#faf8ef"}#w(e,t){const s=document.querySelector(".header").getBoundingClientRect().height;return((window.innerHeight/10-(e*t-(s/10).toFixed(2)))/2).toFixed(2)}addWaterTo(e,t){const s=t[e];s.classList.contains("game__cell--odd")?s.style.cssText+="background-color: #84c4f7; transition: all 3s;":s.classList.contains("game__cell--even")&&(s.style.cssText+="background-color: #8fcaf9; transition: all 3s;")}async addGrassTo(e,t){const s=t[e];s.style.cssText+="border: none; box-shadow: none; transition: all 1.5s; background-color: #9db66a;",await u(1500),s.style.backgroundColor="#62ad50"}getCellsNumbers(){return this.#t}#x(e,t){const s=(.85*window.innerHeight/t/10).toFixed(2),l=(.85*window.innerWidth/e/10).toFixed(2);return s>l?l:s}#T(e,t,s){for(let l=0;l<e;l++)for(let e=0;e<t;e++){const t=document.createElement("div"),i=l+"x"+e;t.classList.add("game__cell",`game__cell--${i}`),t.style.fontSize=.7*s+"rem",this.#t[i]=0,this.#m[i]=t}return this.#m}#D(e){for(let t in e)this.#b.appendChild(e[t])}#S(e){let t=0,s=e-1;for(let l in this.#m){const i=this.#m[l];t%2?i.classList.add("game__cell--even"):i.classList.add("game__cell--odd"),t===s?s===e-1?(s=e,t=1):s===e&&(s=e-1,t=0):t++}}};var g=new class{#A={};#N={};#M;#B={};placeBombs(e,t,s,l){for(this.#E(l);s>0;){const l=Math.floor(Math.random()*t),i=Math.floor(Math.random()*e),a=l+"x"+i;this.#A.hasOwnProperty(a)||(this.#A[a]=!0,this.#N[a]=99,this.#k(l,i),s--)}}reset(){this.#A={},this.#N={},this.#M=void 0,this.#B={}}getCellsPlacementObj(){return this.#N}#L(e){for(let t in this.#B){const s=e[t];s&&(s.style.boxShadow="none")}for(const e of Object.getOwnPropertyNames(this.#B))delete this.#B[e]}#P(e){return e.textContent<50&&e.textContent>0}addCellBorders(e,t){this.#L(e),t.forEach((t=>{const[s,l]=t.split("x");d(s,l,!0).forEach(((t,s)=>{const l=e[t];if(l&&!l.classList.contains("clicked")&&!this.#P(l)){const e=this.#W(s);this.#B.hasOwnProperty(t)||(this.#B[t]=[]),this.#B[t].includes(e)||this.#B[t].push(e)}}))}));for(let t in this.#B){const s=["left","right","bottom","top"],l=e[t];let r=["inset 0 1px 3px rgba(255, 255, 255, 0.18)"];this.#B[t].forEach((e=>{r.push(a[e])})),s.forEach((e=>{this.#B[t].includes(e)||r.push(i[e])}));const n=r.join(",")+";";l.style.cssText+=`box-shadow: ${n}`}}#W(e){let t="";switch(e){case 0:t="bottom";break;case 1:t="right";break;case 2:t="left";break;case 3:t="top"}return t}highlightCellsAround(e,t){let[s,l]=e.classList[1].slice(12).split("x"),i=d(s,l);if(this.#M?.classList.contains("cell__overlay")||1===this.#M?.textContent.length)return[s,l]=this.#M.classList[1].slice(12).split("x"),i=d(s,l),i.forEach((e=>{i[e]?.classList.remove("cell__overlay")})),void(this.#M=void 0);e.classList.contains("clicked")&&!this.#P(e)||i.forEach((s=>{const l=t[s];l?.classList.contains("clicked")&&l!==e||l?.classList.add("cell__overlay"),this.#M=e}))}#E(e){const[t,s]=e.classList[1].slice(12).split("x").map((e=>+e));d(t,s).forEach((e=>{this.#A[e]=!0}))}#k(e,t){d(e,t).forEach(((e,t)=>{4!==t&&this.#H(e)}))}#H(e){this.#N.hasOwnProperty(e)?this.#N[e]+=1:this.#N[e]=1}};var f=new class{#I=[];#_=[];#R=[];#O=[];#V;reset(){this.#I=[],this.#_=[],this.#R=[],this.#O=[]}animateNumberFadeOut(e,t){const s=t[e];s.style.cssText+="transition: all 0.3s; color: transparent;",setTimeout(this.#q.bind(this,s),300)}cancelBombAnimation(){this.#V=!1}async blowBombs(e,t,l){try{this.#V=!0;let i=l;for(;t.length>0&&this.#V;){const l=i?t.indexOf(i):this.#Q(0,t.length),a=this.#Q(100,600),r=this.#Q(1,s.length),n=s[r],o=e[i||t[l]];c(o,"small",n,.4),o.classList.add("bomb"),o.style.setProperty("--bomb-color",n[2]),o.style.setProperty("--bomb-bg",n[1]),setTimeout((function(){o.style.setProperty("--bomb-bg",n[0])}),800),t.splice(l,1),i=!1,await u(a)}return!0}catch(e){console.log(e)}}#q(e){e.textContent=""}#$(e){this.#R.includes(e)||this.#_.includes(e)||this.#_.push(e)}getFlagsToDelete(){const e=[...this.#O];return this.#O.length=0,e}#z(e){this.hasFlag(e)&&!this.#O.includes(e)&&this.#O.push(e)}#j(e,t,s){const l=s[e];this.#z(l),l.classList.add("clicked"),l.textContent=t[e],this.#I.push(e),l.style.setProperty("--color-text",h(t[e])),l.dataset.number=t[e],this.#R.push(e),c(l)}revealEmptyCell(e,t,s,l){for(e.classList.add("clicked"),this.#_.push(t);this.#_.length>0;)this.#G(s,l)}#G(e,t){const[s,l]=this.#_[0].split("x").map((e=>+e)),i=[0,2,6,8];d(s,l).forEach(((s,l)=>{if(i.includes(l)&&e[s]>0&&e[s]<11&&this.#j(s,e,t),!i.includes(l))if(0===e[s]){const e=t[s];e.classList.add("clicked"),this.#$(s),this.#z(e)}else e[s]>0&&e[s]<11&&this.#j(s,e,t)})),this.#R.push(this.#_[0]),this.#_.splice(0,1)}revealNumber(e,t,s){e.textContent=s,e.classList.add("clicked"),e.style.setProperty("--color-text",h(s)),this.#I.push(t),c(e,"small")}getCellsRevealed(){return this.#R}clearCellsRevealed(){this.#R.length=0}getCellsWithNumbers(){return this.#I}deleteClickHandler(e,t,s){e.removeEventListener(`${s}`,t)}addAllClickHandler(e,t,s){for(let l in e){const i=e[l];i.addEventListener("mousedown",t),i.addEventListener("mousedown",s),i.addEventListener("mouseup",s)}}addAllTouchHandler(e,t,s){for(let l in e){const i=e[l];i.addEventListener("touchstart",t),i.addEventListener("touchend",s)}}async animateFlagDelete(e){try{const t=e.querySelector(".game__cell--flag");if(!t)return;const s=t?.cloneNode(!0);t.style.display="none",s.style.cssText+="z-index: 10000; font-size: 1.7rem; position: absolute; transition: all 0.3s; transform: scale(1) rotate(0deg) translate(-50%, -50%); animation: none; top: 50%; left: 50%; opacity: 1;",s.classList.remove(".game__cell--flag"),e.appendChild(s),await u(1);let l=this.#Q(50,150);const i=this.#Q(0,1)?"-":"";let a=this.#Q(5,90);s.style.cssText+=`transform: scale(1) rotate(${i}${a}deg); top: -${this.#Q(100,300)}%; left: ${i}${l}%; `,await u(300),s.style.cssText=+`transition: all 0.5s; transform: scale(0) rotate(${i}${1.2*a}deg); top: ${this.#Q(400,600)}%; left: ${i}${1.2*l}%; `,await u(500),e.innerHTML="",+e.dataset.number&&(e.textContent=e.dataset.number)}catch(e){console.log(e)}}hasFlag(e){return e.textContent.length>1}addFlag(e){const t=document.createElement("div");t.innerHTML="&#128681;",t.classList.add("game__cell--flag"),e.appendChild(t),setTimeout((()=>{t.style.cssText+="top: 50%; opacity: 1;"}),10)}#Q(e,t){return Math.floor(Math.random()*(t-e)+e)}};var p=new class{#U=document.querySelector(".statistics__timer-counter");#Z=document.querySelector(".statistics__flags-counter");#X=document.querySelector("#difficulty");#Y=0;#J;#K;startTimer(){this.#K=new Date,this.#J=setInterval(this.#ee.bind(this),1e3)}addClickHandler(e){this.#X.addEventListener("change",e)}#ee(){this.#Y=Math.round((new Date-this.#K)/1e3),this.#te(this.#Y)}#te(e){const t=(e+"").padStart(3,"0");this.#U.textContent=t}printFlags(e){this.#Z.textContent=e}cleanTimer(e=!0){clearInterval(this.#J),e&&(this.#Y=0,this.#K=void 0,this.#te(this.#Y))}getTimerValue(){return this.#Y}};var b=new class{#se=document.querySelector(".highscore__label");#le=document.querySelector(".actual-score__label");#ie=document.querySelector(".overlay");#ae=document.querySelector(".summary__btn");#re=document.querySelector(".summary");#ne=!1;addHandlerToBtn(e){this.#ae.addEventListener("click",e)}isPopupDisplayed(){return this.#ne}async toggleOverlayAndPopup(){try{const e=window.innerWidth<640?"--summary-width: 90vw;":"",t=this.#ie,s=this.#re;return this.#ne?(this.#ne=!1,t.style.cssText="visibility: hidden; opacity: 0;",void(s.style.cssText=`${e}pointer-events: none; visibility: hidden; opacity: 0;`)):(this.#ne=!0,t.style.cssText="visibility: visible; opacity: 1;",void(s.style.cssText=`${e} pointer-events: auto; visibility: visible; opacity: 1;`))}catch(e){console.log(e)}}printActualscore(e){const t=(e+"").padStart(3,"0");this.#le.textContent=t}printHighscore(e){const t=(e+"").padStart(3,"0");this.#se.textContent=t}};function C(e){e.preventDefault(),1===e.which&&F.call(this),3===e.which&&w.call(this),r.isGameFinished()&&S()}function y(e){r.startTouchTimer();const t=setTimeout((()=>w.call(this)),200);r.setTimeoutID(t)}function v(e){if(r.endTouchTimer()<200)return r.resetTimeoutID(),f.hasFlag(this)?(w.call(this),void(r.isGameFinished()&&S())):(F.call(this),void(r.isGameFinished()&&S()))}function F(){if(0===r.getMovesCounter()){const e=r.getSettings();g.placeBombs(...e,this),r.updateCellsNumbers(g.getCellsPlacementObj()),p.startTimer()}r.movesCounterAdd();const e=this.classList[1].slice(12),t=r.getCellNumber(e),s=r.getAllCells();if(r.cellIsNumber(e)&&!f.hasFlag(this)&&!r.cordsHaveFlag(e))return f.revealNumber(this,e,t),g.addCellBorders(s,f.getCellsWithNumbers()),T(this),void r.saveOpenedCells([e]);if(0===t&&!f.hasFlag(this)&&!r.cordsHaveFlag(e)){f.revealEmptyCell(this,e,r.getCellsNumbers(),s),g.addCellBorders(s,f.getCellsWithNumbers()),r.saveOpenedCells(f.getCellsRevealed()),f.getFlagsToDelete().forEach((e=>{r.deleteFlagCords(e.classList[1].slice(12)),p.printFlags(r.increaseFlagCounter()),f.animateFlagDelete(e)}));return f.getCellsRevealed().forEach((e=>{T(s[e])})),void f.clearCellsRevealed()}t>50&&!f.hasFlag(this)&&!r.cordsHaveFlag(e)&&async function(e){try{p.cleanTimer(),r.getElementsWithFlags().forEach((e=>{f.animateFlagDelete(e)}));const t=r.getAllCells(),s=r.getAllCellsWithBombs();setTimeout((function(){r.deviceIsPhone()?f.addAllTouchHandler(t,D):f.addAllClickHandler(t,D)}),1e3);for(let e in t){const s=t[e];s.classList.contains("clicked")||(f.deleteClickHandler(s,x,"mouseup"),f.deleteClickHandler(s,x,"mousedown"),T(s))}if(await f.blowBombs(t,s,e),b.isPopupDisplayed()||r.getMovesCounter()<=1)return;D()}catch(e){console.log(e)}}(e)}function x(e){2===e.which&&g.highlightCellsAround(this,r.getAllCells())}async function w(){try{const e=this.classList[1].slice(12);if(r.flagCordsAreQueued(e))return;if(r.addFlagCordsToQueue(e),f.hasFlag(this)&&r.cordsHaveFlag(e))return p.printFlags(r.increaseFlagCounter()),await f.animateFlagDelete(this),r.deleteFlagCords(e),void r.deleteCordsFromQueue(e);if(!r.getFlagsCounter())return;return p.printFlags(r.decreaseFlagCounter()),r.addFlagCords(e),f.addFlag(this),void r.deleteCordsFromQueue(e)}catch(e){console.log(e)}}function T(e){f.deleteClickHandler(e,C,"mousedown"),f.deleteClickHandler(e,y,"touchstart"),f.deleteClickHandler(e,v,"touchend")}async function D(){try{if(b.isPopupDisplayed())return;await u(1),b.toggleOverlayAndPopup(),b.addHandlerToBtn(A)}catch(e){console.log(e)}}async function S(){try{const e=r.getAllCells();p.cleanTimer(!1);const t=p.getTimerValue();r.getElementsWithFlags().forEach((e=>{f.animateFlagDelete(e)}));r.getAllCellsWithNumbers().forEach((t=>{f.animateNumberFadeOut(t,e),m.addWaterTo(t,e)}));r.getAllCellsWithBombs().forEach((t=>m.addGrassTo(t,e))),b.printActualscore(t),r.checkForHighScore(t)&&(r.saveHighScore(t),b.printHighscore(t)),await u(4e3),b.toggleOverlayAndPopup(),b.addHandlerToBtn(A)}catch(e){console.log(e)}}function A(){f.cancelBombAnimation(),M(r.getActualDifficulty()),b.toggleOverlayAndPopup()}function N(e){M(e.target.value)}function M(e){r.reset(),g.reset(),f.reset(),p.cleanTimer(),r.setActualDifficulty(e),b.printHighscore(r.getHighscore());const t=r.getSettings(),s=m.createBoard(...t,e);r.setCellsNumbers(m.getCellsNumbers()),r.setAllCells(s),p.printFlags(r.setFlagCounter(e)),r.deviceIsPhone()?f.addAllTouchHandler(s,y,v):f.addAllClickHandler(s,C,x),p.addClickHandler(N)}r.setClientWidth(window.innerWidth),m.setBackground(window.innerWidth),r.getScoreFromLocalStorage(),M("med");
//# sourceMappingURL=index.7d571d1c.js.map
